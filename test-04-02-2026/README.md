# Docker Compose Debug Quest

–ü—Ä–æ—Å—Ç–æ–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- **frontend** ‚Äî nginx
- **backend** ‚Äî python (flask)
- **database** ‚Äî postgres

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –≤–µ—Ä—Å–∏–∏

1. **Backend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–ª—Å—è –∫ –ë–î**  
   `DB_HOST: localhost` ‚Üí –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `localhost` = —Å–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∞ –Ω–µ –ë–î

2. **502 Bad Gateway –æ—Ç Nginx**  
   `proxy_pass http://localhost:5000` ‚Üí –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `frontend`, `localhost` = —Å–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∞ –Ω–µ backend

3. **–î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å**  
   –ù–µ—Ç volume –¥–ª—è –ë–î ‚Üí –ø–æ—Å–ª–µ `docker compose down` –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø–∞–¥–∞–ª–∏

4. **Backend —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª —Ä–∞–Ω—å—à–µ –ë–î**  
   –ù–µ—Ç `healthcheck` ‚Üí backend –ø—ã—Ç–∞–ª—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤–æ–π –ë–î

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –≤ `docker-compose.yml`)

| –ü—Ä–æ–±–ª–µ–º–∞ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ |
|----------|-------------|------------|
| `DB_HOST: localhost` | `DB_HOST: db` | –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ Docker Compose |
| –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö | `volumes: pgdata` | –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π volume –¥–ª—è PostgreSQL |
| Backend —Å—Ç–∞—Ä—Ç—É–µ—Ç —Ä–∞–Ω—å—à–µ –ë–î | `healthcheck` + `condition: service_healthy` | –ñ–¥—ë–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º |
| 502 Bad Gateway | `extra_hosts: - "localhost:backend"` | –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º `localhost` –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä backend |
| –ü–æ—Ä—Ç 5000 –ø—Ä–æ–±—Ä–æ—à–µ–Ω | –ù–µ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ—Ä—Ç | –ü–æ—Ä—Ç 5000 –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ Docker |

## üöÄ –ó–∞–ø—É—Å–∫

```bash
docker compose up --build